# Return To Library (RTL)

## Return to Library
- **Return To Library** : 보호 기법이 적용된 환경에서, 실행 권한이 있는 라이브러리 코드로 실행 흐름을 돌려 공격자가 원하는 행위를 수행하는 공격 기법
- 배경
  - NX로 인해 공격자가 버퍼에 주입한 쉘 코드 실행이 어려워짐
  - 스택 버퍼오버플로우 취약점으로 반환 주소를 덮는 것은 여전히 가능  
  -> 실행 권한이 남아있는 코드 영역으로 반환 주소를 덮는 공격 기법 고안
- 공격 원리
  - 반환 주소 조작 : 함수가 종료될 때 돌아갈 반환 주소를 스택의 쉘 코드가 아닌, 라이브러리 함수의 주소로 덮어씀
  - 코드 재사용 : 주로 리눅스 표준 라이브러리인 `libc`에 정의된 함수를 사용함
    - 쉘 명령어를 실행할 수 있는 `system()`, 다른 프로그램을 실행할 수 있는 `execve()`와 같은 함수들이 `libc`내부에 구현되어 있기 때문 
  - 실행 : 프로그램이 종료되면서 공격자가 지정한 라이브러리 함수(ex. `system`)가 실행됨

